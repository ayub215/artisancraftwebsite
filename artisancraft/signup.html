<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up | ArtisanCraft</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'artisan': {
                            '50': '#faf6f2',
                            '100': '#f3e9e0',
                            '200': '#e6d1bc',
                            '300': '#d6b28e',
                            '400': '#c8926a',
                            '500': '#bf7b4d',
                            '600': '#b16a43',
                            '700': '#93543a',
                            '800': '#764535',
                            '900': '#603a2e',
                            '950': '#331c17',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        
        .float-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        .form-input:focus {
            box-shadow: 0 0 0 3px rgba(191, 123, 77, 0.3);
        }
        
        .artisan-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: #faf6f2;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%23bf7b4d" stroke-width="1" stroke-opacity="0.15" /></svg>');
            background-size: 40px;
            opacity: 0.8;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4" style="outline: rgb(0, 0, 0) dotted 3px; outline-offset: 1px;">
    <div class="artisan-bg"></div>
    
    <!-- Handicraft decoration elements -->
    <div class="fixed top-10 left-10 w-16 h-16 float-animation">
        <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M50 10C70 10 85 25 85 45C85 65 70 80 50 80C30 80 15 65 15 45C15 25 30 10 50 10Z" fill="#BF7B4D" fill-opacity="0.2"></path>
        </svg>
    </div>
    
    <div class="fixed bottom-10 right-10 w-20 h-20 float-animation" style="animation-delay: 1s;">
        <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="20" y="20" width="60" height="60" rx="5" fill="#BF7B4D" fill-opacity="0.2"></rect>
        </svg>
    </div>
    
    <div class="max-w-md w-full bg-white rounded-xl shadow-xl overflow-hidden border border-artisan-200">
        <div class="p-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="mx-auto mb-4 flex items-center justify-center">
                    <img src="logot.jpeg" alt="ArtisanCraft Logo" class="w-24 h-24 object-contain" />
                </div>
                <h1 class="text-3xl font-bold text-artisan-800 mb-1">ArtisanCraft</h1>
                <p class="text-artisan-600">Create your account</p>
            </div>
            
            <!-- User Type Toggle -->
            <div class="flex mb-6 bg-artisan-50 rounded-lg p-1">
                <button type="button" id="userBtn" class="flex-1 py-2 px-4 rounded-md font-medium text-center transition-all bg-white shadow-sm text-artisan-700">
                    Customer
                </button>
                <button type="button" id="artisanBtn" class="flex-1 py-2 px-4 rounded-md font-medium text-center transition-all text-artisan-600">
                    Artisan
                </button>
            </div>
            
            <!-- Signup Form -->
            <form id="signupForm" class="space-y-4" action="insertsignup.php" method="POST">
                <div>
                    <label for="name" class="block text-sm font-medium text-artisan-700 mb-1">Full Name</label>
                    <input type="text" id="name" name="name" required class="w-full px-4 py-3 rounded-lg border border-artisan-200 form-input focus:outline-none focus:border-artisan-500 transition-colors" placeholder="Your name">
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-artisan-700 mb-1">Email Address</label>
                    <input type="email" id="email" name="email" required class="w-full px-4 py-3 rounded-lg border border-artisan-200 form-input focus:outline-none focus:border-artisan-500 transition-colors" placeholder="your@email.com">
                    <span id="email-error" style="color: #d32f2f; font-size: 0.95em; display: none; margin-top: 4px;"></span>
                </div>

                <!-- Phone Number Field (always shown) -->
                <div>
                    <label for="phone" class="block text-sm font-medium text-artisan-700 mb-1">Phone Number</label>
                    <input type="tel" id="phone" name="phone" required class="w-full px-4 py-3 rounded-lg border border-artisan-200 form-input focus:outline-none focus:border-artisan-500 transition-colors" placeholder="+91 98765 43210">
                </div>

                <!-- Artisan Specific Fields -->
                <div id="artisanFields" class="hidden space-y-4">
                    <div>
                        <label for="craft" class="block text-sm font-medium text-artisan-700 mb-1">Craft Specialty</label>
                        <select id="craft" name="craft" class="w-full px-4 py-3 rounded-lg border border-artisan-200 form-input focus:outline-none focus:border-artisan-500 transition-colors appearance-none">
                            <option value="">Select your craft</option>
                            <option value="1">Pottery</option>
                            <option value="2">Woodworking</option>
                            <option value="3">Metalwork</option>
                            <option value="4">Glasswork</option>
                            <option value="5">Leatherwork</option>
                            <option value="6">Papercraft</option>
                            <option value="7">Basketry</option>
                            <option value="8">Candlemaking</option>
                            <option value="9">Knitting & Crochet</option>
                        </select>
                    </div>
                </div>
                
                <!-- Password Fields -->
                <div>
                    <div class="flex justify-between items-center mb-1">
                        <label for="password" class="text-sm font-medium text-artisan-700">Password</label>
                        <i id="togglePassword" class="fas fa-eye-slash text-artisan-400 text-sm cursor-pointer" title="Show password"></i>
                    </div>
                    <input type="password" id="password" name="password" required class="w-full px-4 py-3 rounded-lg border border-artisan-200 form-input focus:outline-none focus:border-artisan-500 transition-colors" placeholder="••••••••">
                </div>
                
                <div>
                    <div class="flex justify-between items-center mb-1">
                        <label for="confirmPassword" class="text-sm font-medium text-artisan-700">Confirm Password</label>
                        <i id="toggleConfirmPassword" class="fas fa-eye-slash text-artisan-400 text-sm cursor-pointer" title="Show password"></i>
                    </div>
                    <input type="password" id="confirmPassword" name="confirmPassword" required class="w-full px-4 py-3 rounded-lg border border-artisan-200 form-input focus:outline-none focus:border-artisan-500 transition-colors" placeholder="••••••••">
                </div>
                
                <div class="flex items-center">
                    <input type="checkbox" id="terms" name="terms" required class="h-4 w-4 text-artisan-600 focus:ring-artisan-500 border-artisan-300 rounded">
                    <label for="terms" class="ml-2 block text-sm text-artisan-700">
                        I agree to the <a href="#" class="font-medium text-artisan-600 hover:text-artisan-500">Terms</a>
                    </label>
                </div>
                
                <button type="submit" class="w-full bg-artisan-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-artisan-600 focus:outline-none focus:ring-2 focus:ring-artisan-500 focus:ring-offset-1 transition-all mt-4">
                    Create Account
                </button>
                
                <!-- Hidden input to store user type -->
                <input type="hidden" id="usertype" name="usertype" value="customer">
            </form>
            
            <div class="text-center mt-6">
                <p class="text-sm text-artisan-600">
                    Already have an account? 
                    <a href="Login2.html" class="font-medium text-artisan-600 hover:text-artisan-500">Sign in</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Initialize the page with User selected by default
        document.addEventListener('DOMContentLoaded', function() {
            const userBtn = document.getElementById('userBtn');
            const artisanBtn = document.getElementById('artisanBtn');
            const artisanFields = document.getElementById('artisanFields');
            const userTypeInput = document.getElementById('usertype');
            
            // Set initial state
            artisanFields.classList.add('hidden');
            
            function setActiveButton(activeBtn, inactiveBtn) {
                activeBtn.classList.add('bg-white', 'shadow-sm', 'text-artisan-700');
                activeBtn.classList.remove('text-artisan-600');
                inactiveBtn.classList.remove('bg-white', 'shadow-sm', 'text-artisan-700');
                inactiveBtn.classList.add('text-artisan-600');
            }
            
            userBtn.addEventListener('click', function() {
                setActiveButton(userBtn, artisanBtn);
                artisanFields.classList.add('hidden');
                document.getElementById('craft').removeAttribute('required');
                userTypeInput.value = 'customer'; // Set hidden input
            });
            
            artisanBtn.addEventListener('click', function() {
                setActiveButton(artisanBtn, userBtn);
                artisanFields.classList.remove('hidden');
                document.getElementById('craft').setAttribute('required', '');
                userTypeInput.value = 'artisan'; // Set hidden input
            });

            // Password toggle functionality
            const togglePassword = document.getElementById('togglePassword');
            const password = document.getElementById('password');
            const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
            const confirmPassword = document.getElementById('confirmPassword');
            
            function togglePasswordVisibility(field, icon) {
                const type = field.getAttribute('type') === 'password' ? 'text' : 'password';
                field.setAttribute('type', type);
                icon.classList.toggle('fa-eye');
                icon.classList.toggle('fa-eye-slash');
            }
            
            togglePassword.addEventListener('click', function() {
                togglePasswordVisibility(password, this);
            });
            
            toggleConfirmPassword.addEventListener('click', function() {
                togglePasswordVisibility(confirmPassword, this);
            });
            
                // Form validation
            document.getElementById('signupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Basic validation
                if (password.value !== confirmPassword.value) {
                    alert("Passwords don't match!");
                    return;
                }
                
                if (password.value.length < 8) {
                    alert("Password must be at least 8 characters!");
                    return;
                }
                
                if (artisanBtn.classList.contains('bg-white') && !document.getElementById('craft').value) {
                    alert("Please select your craft specialty!");
                    return;
                }
                
                // Success message
                const userType = artisanBtn.classList.contains('bg-white') ? 'artisan' : 'user';
                alert(`Account created successfully! Welcome ${userType}. Redirecting...`);
                
                // In a real app, you would submit the form here
                this.submit();
            });
        });
    </script>
    <script>
document.getElementById("email").addEventListener("blur", function () {
    const email = this.value.trim();
    const userType = document.querySelector("#userBtn.bg-white") ? "customers" :
                     document.querySelector("#artisanBtn.bg-white") ? "artisans" : "";
    const emailError = document.getElementById("email-error");

    if (!email || !userType) {
        emailError.style.display = "none";
        emailError.textContent = "";
        return;
    }

    const formData = new FormData();
    formData.append("email", email);
    formData.append("user_type", userType);

    fetch("check_email.php", {
        method: "POST",
        body: formData
    })
    .then(res => res.text())
    .then(data => {
        if (data.trim() === "exists") {
            emailError.textContent = "This email is already registered.";
            emailError.style.display = "block";
            document.getElementById("email").value = "";
            document.getElementById("email").focus();
        } else {
            emailError.textContent = "";
            emailError.style.display = "none";
        }
    })
    .catch(err => {
        emailError.textContent = "Could not verify email. Please try again.";
        emailError.style.display = "block";
    });
});
</script>

</body>
</html>
